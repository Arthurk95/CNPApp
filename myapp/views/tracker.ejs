<!DOCTYPE html>
<html>
  <nav><%- include header.ejs %></nav>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/blockList.css' />
    <link rel='stylesheet' href='/stylesheets/footer.css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/javascripts/studentSelection.js"></script>
    <script src="/javascripts/utilityScripts.js"></script>
  </head>
  <body>
    
      <!-- Only display if there are students AND activities-->
    <% if (students.length > 0) {%>
        <% if (activities.length > 0) {%>
            <ul id="selectionButtons" class="selectionButtons">
                <li><a id="studentButton" class="accent2Light-BG" onclick="startWithStudents()">Select Students</a></li>
                <li><a id="activitiesButton" class="accent3Light-BG" onclick="startWithActivities()">Select Activity</a></li>
            </ul>
            <%- include listOfStudents.ejs %></ul>

            <ul id="activities" class="blockList activitiesList">
                <li class="flex flexAlignCenter mediumPadding ">
                    <input class="lightGray1-BG font40px" onkeyup="updateSearch('activities', this)"></input>
                    <i class="font30px fas fa-search"></i>
                </li>
                <% activities.forEach((activity, index) => { %>
                <li onclick="activitySelected(this, <%= activity.ActivityId %>)">
                    <div class="blockContainer">
                        <p><%= activity.ActivityName %></p>
                        <div class="checkmarkOverlay">
                            
                        </div>
                    </div>
                </li>
                <% }) %>
            </ul>
        <% } else { %>
            <div class="missingContainer">
                <h2>No Activities</h2>
                <a href="/admin">Add Activities</a>
            </div>
        <% } %>
    <% } else { %>
        <div class="missingContainer">
            <h2>No Students Today</h2>
            <a href="/admin">Add Students</a>
        </div>
    <% } %>
    
    <footer>
        <ul id="footer" class="studentFooter">
            <li id="pottyAndSelect" class="twoButtons">
                <a id="pottyBreak" class="accent3Light-BG smallerFont" onclick="pottyBreak()">Potty Break</a>
                <a id="selectButton" class="accent2Light-BG smallerFont" onclick="selectionMade()">Select</a>
            </li>
            <li id="backAndSubmit" class="twoButtons">
                <a id="backButton" class="accent4-BG" onclick="goBack()">Back</a>
                <a onclick="submitToDB()" class="accent2-BG">Submit</a>
            </li>
            <li id="pottyYesNo" class="titleWithTwoButtons">
                <a class="darkGray3-BG noClick">Accident?</a>
                <a id="pottyYes" class="accent4-BG" onclick="submitPottyToDB(this, true)">Yes</a>
                <a id="pottyNo" class="accent2-BG" onclick="submitPottyToDB(this, false)">No</a>
            </li>
        </ul>
    </footer>
  </body>
</html>
