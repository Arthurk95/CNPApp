<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html>
<html>
  <nav><%- include header.ejs %></nav>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Load d3.js -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="http://d3js.org/d3.v3.js"></script>
    <script src="https://d3js.org/d3.v5.js"></script>

    <!-- Color scale -->
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  </head>

  <body>

    <!-- Navigation -->
    <div id="navigation">
      <nav class="navbar navbar-expand-lg navbar-light bg-light solid w-100">
        <span class="navbar-brand mb-0 h1">CNP Statistics</span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

          <!-- Month selection -->
          <ul class="navbar-nav pull-right">
            <li class="nav-item" id="form">
              <div class="float-right">
                <form id="myForm">
                  <label>Beginning Date</label>
                  <select id="selectNumber"></select>
                  <label>End Date</label>
                  <select id="selectNumber2"></select>
                </form>
              </div> <!-- end month selection-->
            </li>
          </ul>
        </div>
      </nav>
    </div> <!-- end navigation -->

    <!-- PIE CHART -->
    <div class="chart" id="pie">
      <h1>Pie Chart</h1>
      <!-- Add 2 buttons -->
      <button onclick="update(data1)">Data 1</button>
      <button onclick="update(data2)">Data 2</button>

      <div id="navigationPie">
      <ul class="navbar-nav">
        <li class="nav-item" id="form">
          <div class="float-left">
            <form id="myForm">
              <label>First thing</label>
              <select id="selectThing1"></select>
              <label>Second thing</label>
              <select id="selectThing2"></select>
            </form>
          </div>
       </div>
        <!-- Create a div where the graph will take place -->
      <div id="pie"></div>
        
    </div> <!-- end Pie -->

    
    <!-- LINE CHART -->
    <div class="chart" id="line">
      <h1>Line Chart</h1>

      <!-- Initialize a select button -->
      <select id="selectButton"></select>

      <!-- Create a div where the graph will take place -->
      <div id="my_dataviz"></div>

      <script>

        // set the dimensions and margins of the graph
        var margin = {top: 10, right: 100, bottom: 30, left: 30},
            width = 460 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;
        
        // append the svg object to the body of the page
        var svg = d3.select("#my_dataviz")
          .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform",
                  "translate(" + margin.left + "," + margin.top + ")");
        
        //Read the data
        d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_connectedscatter.csv", function(data) {
        
            // List of groups (here I have one group per column)
            var allGroup = ["valueA", "valueB", "valueC"]
        
            // add the options to the button
            d3.select("#selectButton")
              .selectAll('myOptions')
               .data(allGroup)
              .enter()
              .append('option')
              .text(function (d) { return d; }) // text showed in the menu
              .attr("value", function (d) { return d; }) // corresponding value returned by the button
        
            // A color scale: one color for each group
            var myColor = d3.scaleOrdinal()
              .domain(allGroup)
              .range(d3.schemeSet2);
        
            // Add X axis --> it is a date format
            var x = d3.scaleLinear()
              .domain([0,10])
              .range([ 0, width ]);
            svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(x));
        
            // Add Y axis
            var y = d3.scaleLinear()
              .domain( [0,20])
              .range([ height, 0 ]);
            svg.append("g")
              .call(d3.axisLeft(y));
        
            // Initialize line with group a
            var line = svg
              .append('g')
              .append("path")
                .datum(data)
                .attr("d", d3.line()
                  .x(function(d) { return x(+d.time) })
                  .y(function(d) { return y(+d.valueA) })
                )
                .attr("stroke", function(d){ return myColor("valueA") })
                .style("stroke-width", 4)
                .style("fill", "none")
        
            // A function that update the chart
            function update(selectedGroup) {
        
              // Create new data with the selection?
              var dataFilter = data.map(function(d){return {time: d.time, value:d[selectedGroup]} })
        
              // Give these new data to update line
              line
                  .datum(dataFilter)
                  .transition()
                  .duration(1000)
                  .attr("d", d3.line()
                    .x(function(d) { return x(+d.time) })
                    .y(function(d) { return y(+d.value) })
                  )
                  .attr("stroke", function(d){ return myColor(selectedGroup) })
            }
        
            // When the button is changed, run the updateChart function
            d3.select("#selectButton").on("change", function(d) {
                // recover the option that has been chosen
                var selectedOption = d3.select(this).property("value")
                // run the updateChart function with this selected option
                update(selectedOption)
            })
        })
      </script>
    </div> <!-- end Line -->

    <!-- HEAT MAP -->
      <div class="chart" id="heat">
          <h1>Heat Map</h1>

      <!--     <div id="heat"></div>--> 
      <!--     <div id="dataset-picker">--> 
      <!-- </div>--> 
    </div> <!-- end heat --> 
    


    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <!-- local javascript -->
    <script type="text/javascript" src="javascripts/statscripts/pie.js"></script>
    <script type="text/javascript" src="javascripts/statscripts/line.js"></script>
    <script type="text/javascript" src="javascripts/statscripts/navigation.js"></script>
    <script type="text/javascript" src="javascripts/statscripts/heat.js"></script>
  </body>

</html>
