<!DOCTYPE html>
<html>
  <head>
    <nav><%- include header.ejs %></nav>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/students-admin.css' />
    <link rel='stylesheet' href='/stylesheets/studentsList.css' />
    <link rel='stylesheet' href='/stylesheets/student-form.css' />
  </head>
  <body>
    <% if (students.length > 0) {%>
      <ul class="studentsList">
          <% students.forEach((student, index) => { %>
            <% studentSpl = student.StudentName.split(" "); %>
          <li onclick="selectedStudent(this, <%= student.StudentId %>)">
              <a href="/admin/profile/<%= student.StudentId %>" class="imageContainer">
                  <table>
                  <th>
                      <div>
                          <img src="https://cdn2.iconfinder.com/data/icons/popular-social-media-flat/48/Popular_Social_Media-12-512.png">
                      </div>
                      </th>
                  <tr>
                      <td><%= studentSpl[0] %>
                          <br /><%= studentSpl[1] %></td>
                  </tr>
                  </table>
                </a>
          </li>
          <% }) %>
          <li class="addStudent">
            <div class="studentContainer">
              <table>
                <th>
                  <div>
                      <img src="https://cdn2.iconfinder.com/data/icons/popular-social-media-flat/48/Popular_Social_Media-12-512.png">
                  </div>
                </th>
              <tr>
                  <td>a<br />
                  a</td>
              </tr>
              </table>
              <div class="checkmarkOverlay">
                <a onclick="addStudent()" class="plusIcon" title="Create Student">&#43;</a>
              </div>
            </div>
          </li>
      </ul>

      <div id="newStudentForm" class="studentForm">
        <!-- newStudentForm content -->
        <div class="studentForm-content">
          <span class="close">&times;</span>
          <ul>
            <li class="formTitle">Add a Student</li>
            <li><input type="text" id="newStudentName" placeholder="Student Name"></li>
            <li><input type="text" id="newStudentContact" placeholder="Guardian Name"></li>
            <li><input type="text" id="newStudentEmail" placeholder="Guardian Email"></li>
            <li style="text-align: center;"><a id="createStudent">Create</a></li>
          </ul>
      </div>
      </div>
  
<% } else { %>
  <h2>no students</h2>
<% } %>

  </body>
  <script src="/javascripts/adminScripts.js"></script>
  <script>
    // Get the modal
    var formElement = document.getElementById("newStudentForm");

    // Get the <span> element that closes the modal
    var closeButton = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    function addStudent() {
      formElement.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    closeButton.onclick = function() {
      formElement.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == formElement) {
        formElement.style.display = "none";
      }
    }
  </script>
</html>
