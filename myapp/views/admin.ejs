<!DOCTYPE html>
<html>
  <head>
    <nav><%- include header.ejs %></nav>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/students-admin.css' />
    <link rel='stylesheet' href='/stylesheets/studentsList.css' />
    <link rel='stylesheet' href='/stylesheets/student-form.css' />
  </head>
  <body>
    <div>
        <a class="adminButton" id="addStu">Add student</a>
        <a class="adminButton" id="addAct">Add activity</a>
    </div>
    <div class="mainBlock">
        <form id="newStudent" style="visibility:hidden">
          <div class="input">
            <input type="text" id="newStudentName" placeholder="Student name">
            <input type="text" id="newStudentContact" placeholder="Primary contact name">
            <input type="text" id="newStudentEmail" placeholder="Primary contact email">
          </div>
          <a class="adminButton" id="newStudentSubmit">Submit </a><label id="stuStatus" style="visibility:hidden"></label>
        </form>
        <form id="newActivity" style="visibility:hidden">
          <div class="input">
            <input type="text" id="newActivityName" placeholder="Activity name">
          </div>
          <a class="adminButton" id="newActivitySubmit">Submit </a><label id="actStatus" style="visibility:hidden"></label>
      </form>
    </div>

    <% if (students.length > 0) {%>
      <ul class="studentsList">
          <% students.forEach((student, index) => { %>
            <% studentSpl = student.StudentName.split(" "); %>
          <li onclick="selectedStudent(this, <%= student.StudentId %>)">
              <a href="/admin/profile/<%= student.StudentId %>" class="imageContainer">
                  <table>
                  <th>
                      <div>
                          <img src="https://cdn2.iconfinder.com/data/icons/popular-social-media-flat/48/Popular_Social_Media-12-512.png">
                      </div>
                      </th>
                  <tr>
                      <td><%= studentSpl[0] %>
                          <br /><%= studentSpl[1] %></td>
                  </tr>
                  </table>
                </a>
          </li>
          <% }) %>
          <li class="addStudent">
            <div class="studentContainer">
              <table>
                <th>
                  <div>
                      <img src="https://cdn2.iconfinder.com/data/icons/popular-social-media-flat/48/Popular_Social_Media-12-512.png">
                  </div>
                </th>
              <tr>
                  <td>a<br />
                  a</td>
              </tr>
              </table>
              <div class="checkmarkOverlay">
                  <a onclick="addStudent()" class="plusIcon" title="Create Student">&#43</a>
              </div>
            </div>
          </li>
      </ul>

      <div id="newStudentForm" class="studentForm">
        <!-- newStudentForm content -->
        <div class="studentForm-content">
          <span class="close">&times;</span>
            <table>
            <th>New Student</th>
            <tr>
              <td><label>Student Name</label></td>
              <td><input type="text" id="newStudentName" placeholder="Student name"></td>
            </tr>
            <tr>
              <td><label>Gaurdian Name</label></td>
              <td><input type="text" id="newStudentContact" placeholder="Primary Guardian Name"></td>
            </tr>
            <tr>
              <td><label>Guardian Email</label></td>
              <td><input type="text" id="newStudentEmail" placeholder="Primary Guardian Email"></td>
            </tr>
          </table>
        </div>
      
      </div>
  
<% } else { %>
  <h2>no students</h2>
<% } %>

  </body>
  <script src="/javascripts/adminScripts.js"></script>
  <script>
    // Get the modal
    var formElement = document.getElementById("newStudentForm");

    // Get the <span> element that closes the modal
    var closeButton = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    function addStudent() {
      formElement.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    closeButton.onclick = function() {
      formElement.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == formElement) {
        formElement.style.display = "none";
      }
    }
  </script>
</html>
